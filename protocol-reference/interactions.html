<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Interactions - Alloverse Documentation</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Interactions | Alloverse Documentation</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Interactions" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Getting started with Alloverse. Guides, code snippets, API references…" /> <meta property="og:description" content="Getting started with Alloverse. Guides, code snippets, API references…" /> <link rel="canonical" href="/protocol-reference/interactions" /> <meta property="og:url" content="/protocol-reference/interactions" /> <meta property="og:site_name" content="Alloverse Documentation" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Interactions" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://alloverse.com/wp-content/uploads/Alloverse-logo-moniker-256x38-1.svg"}},"description":"Getting started with Alloverse. Guides, code snippets, API references…","headline":"Interactions","url":"/protocol-reference/interactions","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <script type="text/javascript" src="/assets/js/custom.js"></script> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Get Started (Lua)</a></li><li class="nav-list-item"><a href="/csharp" class="nav-list-link">Get Started (C#)</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/classes/" class="nav-list-link">AlloUI lua</a><ul class="nav-list "><li class="nav-list-item "><a href="/doc/classes/App.html" class="nav-list-link">App</a></li><li class="nav-list-item "><a href="/doc/classes/Asset.html" class="nav-list-link">Asset</a></li><li class="nav-list-item "><a href="/doc/classes/AssetManager.html" class="nav-list-link">AssetManager</a></li><li class="nav-list-item "><a href="/doc/classes/AssetView.html" class="nav-list-link">AssetView</a></li><li class="nav-list-item "><a href="/doc/classes/Base64Asset.html" class="nav-list-link">Base64Asset</a></li><li class="nav-list-item "><a href="/doc/classes/Bounds.html" class="nav-list-link">Bounds</a></li><li class="nav-list-item "><a href="/doc/classes/Button.html" class="nav-list-link">Button</a></li><li class="nav-list-item "><a href="/doc/classes/Client.html" class="nav-list-link">Client</a></li><li class="nav-list-item "><a href="/doc/classes/Color.html" class="nav-list-link">Color</a></li><li class="nav-list-item "><a href="/doc/classes/Cube.html" class="nav-list-link">Cube</a></li><li class="nav-list-item "><a href="/doc/classes/Entity.html" class="nav-list-link">Entity</a></li><li class="nav-list-item "><a href="/doc/classes/FileAsset.html" class="nav-list-link">FileAsset</a></li><li class="nav-list-item "><a href="/doc/classes/FrameView.html" class="nav-list-link">FrameView</a></li><li class="nav-list-item "><a href="/doc/classes/GrabHandle.html" class="nav-list-link">GrabHandle</a></li><li class="nav-list-item "><a href="/doc/classes/Label.html" class="nav-list-link">Label</a></li><li class="nav-list-item "><a href="/doc/classes/LovrFileAsset.html" class="nav-list-link">LovrFileAsset</a></li><li class="nav-list-item "><a href="/doc/classes/ModelView.html" class="nav-list-link">ModelView</a></li><li class="nav-list-item "><a href="/doc/classes/NavStack.html" class="nav-list-link">NavStack</a></li><li class="nav-list-item "><a href="/doc/classes/Ninepatch.html" class="nav-list-link">Ninepatch</a></li><li class="nav-list-item "><a href="/doc/classes/Pose.html" class="nav-list-link">Pose</a></li><li class="nav-list-item "><a href="/doc/classes/PropertyAnimation.html" class="nav-list-link">PropertyAnimation</a></li><li class="nav-list-item "><a href="/doc/classes/ProxyIconView.html" class="nav-list-link">ProxyIconView</a></li><li class="nav-list-item "><a href="/doc/classes/ResizeHandle.html" class="nav-list-link">ResizeHandle</a></li><li class="nav-list-item "><a href="/doc/classes/Size.html" class="nav-list-link">Size</a></li><li class="nav-list-item "><a href="/doc/classes/Slider.html" class="nav-list-link">Slider</a></li><li class="nav-list-item "><a href="/doc/classes/Speaker.html" class="nav-list-link">Speaker</a></li><li class="nav-list-item "><a href="/doc/classes/StackView.html" class="nav-list-link">StackView</a></li><li class="nav-list-item "><a href="/doc/classes/Surface.html" class="nav-list-link">Surface</a></li><li class="nav-list-item "><a href="/doc/classes/TabView.html" class="nav-list-link">TabView</a></li><li class="nav-list-item "><a href="/doc/classes/TextField.html" class="nav-list-link">TextField</a></li><li class="nav-list-item "><a href="/doc/classes/VideoSurface.html" class="nav-list-link">VideoSurface</a></li><li class="nav-list-item "><a href="/doc/classes/View.html" class="nav-list-link">View</a></li></ul></li><li class="nav-list-item"><a href="/concepts/architecture" class="nav-list-link">Architecture</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/protocol-reference" class="nav-list-link">Protocol Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/protocol-reference/asset-protocols" class="nav-list-link">Asset Protocol</a></li><li class="nav-list-item "><a href="/protocol-reference/coordinate-system" class="nav-list-link">Coordinate System</a></li><li class="nav-list-item "><a href="/protocol-reference/identity" class="nav-list-link">Identity</a></li><li class="nav-list-item "><a href="/protocol-reference/intent" class="nav-list-link">Intent</a></li><li class="nav-list-item active"><a href="/protocol-reference/interactions" class="nav-list-link active">Interactions</a></li><li class="nav-list-item "><a href="/protocol-reference/state-diffs" class="nav-list-link">State Diffs</a></li><li class="nav-list-item "><a href="/protocol-reference/url-definitions" class="nav-list-link">URL Definitions</a></li><li class="nav-list-item "><a href="/protocol-reference/wire-protocol" class="nav-list-link">Wire Protocol</a></li></ul></li><li class="nav-list-item"><a href="/components" class="nav-list-link">Components</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/community" class="nav-list-link">Community</a><ul class="nav-list "><li class="nav-list-item "><a href="/community/contributing" class="nav-list-link">Contributing to Alloverse</a></li><li class="nav-list-item "><a href="/community/code-of-conduct.html" class="nav-list-link">Code of Conduct</a></li></ul></li><li class="nav-list-item"><a href="/hig" class="nav-list-link">3D Interface Design Guidelines</a></li><li class="nav-list-item"><a href="/hosting" class="nav-list-link">Hosting an Alloverse app</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/licenses" class="nav-list-link">Licenses</a><ul class="nav-list "><li class="nav-list-item "><a href="/license/alloverse-license.html" class="nav-list-link">Alloverse License</a></li><li class="nav-list-item "><a href="/licenses/licenses" class="nav-list-link">Licenses used by Alloverse</a></li></ul></li><li class="nav-list-item"><a href="/doc/" class="nav-list-link">Index</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Alloverse Documentation" aria-label="Search Alloverse Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/protocol-reference">Protocol Reference</a></li> <li class="breadcrumb-nav-list-item"><span>Interactions</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="interactions"> <a href="#interactions" class="anchor-heading" aria-labelledby="interactions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Interactions </h1> <p>These interactions are defined by alloserv. Third party developers may create any interactions they want. They can vote to make their own interactions official by opening an issue on this repo.</p> <ol id="markdown-toc"> <li><a href="#interactions" id="markdown-toc-interactions">Interactions</a> <ol> <li><a href="#authentication-and-identity" id="markdown-toc-authentication-and-identity">Authentication and identity</a> <ol> <li><a href="#agent-announce" id="markdown-toc-agent-announce">Agent announce</a></li> <li><a href="#modify-acl" id="markdown-toc-modify-acl">Modify ACL</a></li> </ol> </li> <li><a href="#modifying-the-world" id="markdown-toc-modifying-the-world">Modifying the world</a> <ol> <li><a href="#spawn-entity" id="markdown-toc-spawn-entity">Spawn entity</a></li> <li><a href="#remove-entity" id="markdown-toc-remove-entity">Remove entity</a></li> <li><a href="#changeaddremove-components-in-entity" id="markdown-toc-changeaddremove-components-in-entity">Change/add/remove component(s) in entity</a></li> <li><a href="#launch-app" id="markdown-toc-launch-app">Launch app</a></li> </ol> </li> <li><a href="#user-interface-interactions" id="markdown-toc-user-interface-interactions">User interface interactions</a> <ol> <li><a href="#entity-points-at-another-entity" id="markdown-toc-entity-points-at-another-entity">Entity points at another entity</a></li> <li><a href="#entity-pokes" id="markdown-toc-entity-pokes">Entity pokes</a></li> <li><a href="#entity-grabs" id="markdown-toc-entity-grabs">Entity grabs</a></li> <li><a href="#add-property-animation" id="markdown-toc-add-property-animation">Add property animation</a></li> <li><a href="#remove-property-animation" id="markdown-toc-remove-property-animation">Remove property animation</a></li> </ol> </li> <li><a href="#protocol-level-messages" id="markdown-toc-protocol-level-messages">Protocol level messages</a> <ol> <li><a href="#entity-wishes-to-transmit-live-media" id="markdown-toc-entity-wishes-to-transmit-live-media">Entity wishes to transmit live media</a></li> <li><a href="#tbd-subscribeunsubscribe" id="markdown-toc-tbd-subscribeunsubscribe">TBD: Subscribe/unsubscribe</a></li> </ol> </li> </ol> </li> </ol> <h2 id="authentication-and-identity"> <a href="#authentication-and-identity" class="anchor-heading" aria-labelledby="authentication-and-identity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentication and identity </h2> <h3 id="agent-announce"> <a href="#agent-announce" class="anchor-heading" aria-labelledby="agent-announce"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Agent announce </h3> <p>After an agent connects, before it can interact with the place it must announce itself and spawn its avatar entity. Failure to announce will lead to force disconnect.</p> <ul> <li>Receiver: <code class="language-plaintext highlighter-rouge">place</code></li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"announce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">,</span><span class="w">
  </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identity"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="c1">// identity body goes here</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"spawn_avatar"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="c1">// same as "spawn_entity" key in "Agent requests to spawn entity"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"announce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{ID of avatar entity}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{name of place}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="modify-acl"> <a href="#modify-acl" class="anchor-heading" aria-labelledby="modify-acl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Modify ACL </h3> <p>TBD</p> <h2 id="modifying-the-world"> <a href="#modifying-the-world" class="anchor-heading" aria-labelledby="modifying-the-world"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Modifying the world </h2> <h3 id="spawn-entity"> <a href="#spawn-entity" class="anchor-heading" aria-labelledby="spawn-entity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spawn entity </h3> <ul> <li>Receiver: <code class="language-plaintext highlighter-rouge">place</code></li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"spawn_entity"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="c1">// list of initial values for components for new entity goes here</span><span class="w">

    </span><span class="nl">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="c1">// list of new child entities to create; same body as for "spawn_entity".</span><span class="w">
      </span><span class="c1">// These will automatically get a "relationships" component set up referencing</span><span class="w">
      </span><span class="c1">// the parent entity.</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="c1">// list of initial values for components for child of new entity goes here</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="c1">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"spawn_entity"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{ID of entity if spawned}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="remove-entity"> <a href="#remove-entity" class="anchor-heading" aria-labelledby="remove-entity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Remove entity </h3> <ul> <li>Receiver: <code class="language-plaintext highlighter-rouge">place</code></li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"remove_entity"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{ID of entity to remove}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{'reparent' or 'cascade'}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Reparent: If the removed entity has children, they will be reparented to root</li> <li> <p>Cascade: If the removed entity has children, they will also be removed.</p> </li> <li>Response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"remove_entity"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="changeaddremove-components-in-entity"> <a href="#changeaddremove-components-in-entity" class="anchor-heading" aria-labelledby="changeaddremove-components-in-entity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Change/add/remove component(s) in entity </h3> <ul> <li>Receiver: <code class="language-plaintext highlighter-rouge">place</code></li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"change_components"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{entity ID}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"add_or_change"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="c1">// object with new values for components (regardless of if</span><span class="w">
    </span><span class="c1">// component already exists on entity)</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="s2">"remove"</span><span class="p">,</span><span class="w">
  </span><span class="p">[</span><span class="w">
    </span><span class="c1">// keys of components to remove</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>Response:</p> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"change_components"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>A default ACL rule is set so that you must own the entity whose component you’re changing, but this rule can be changed.</p> <h3 id="launch-app"> <a href="#launch-app" class="anchor-heading" aria-labelledby="launch-app"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Launch app </h3> <ul> <li>Receiver: <code class="language-plaintext highlighter-rouge">place</code></li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"launch_app"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{app URL}"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="err">launch</span><span class="w"> </span><span class="err">parameters</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">arbitrary</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">object</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>Response:</p> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"launch_app"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{avatar id}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>or</p> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"launch_app"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{human-readable error string"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>Ask the Place to launch an app on behalf of the sending entity. The Place will establish a connection to the requested app if possible, launch it to that Place with the given arguments and the identity of the calling client, and then return the avatar ID if all that succeeded.</p> <p>(The avatar of an app is the “main UI” entity of the app.)</p> <h2 id="user-interface-interactions"> <a href="#user-interface-interactions" class="anchor-heading" aria-labelledby="user-interface-interactions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User interface interactions </h2> <h3 id="entity-points-at-another-entity"> <a href="#entity-points-at-another-entity" class="anchor-heading" aria-labelledby="entity-points-at-another-entity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entity points at another entity </h3> <p>An entity, most likely the avatar of a user, is pointing with their finger at another entity. This is used as a precursor to actually interacting with it (“poking it”).</p> <p>The interaction describes two points in world space: the tip of the finger, and the intersection point between the ray from the finger and the nearest entity, so that the entity can know <em>where</em> on itself someone is pointing.</p> <ul> <li>Receiver: The pointed-at entity</li> <li>Type: <code class="language-plaintext highlighter-rouge">one-way</code></li> <li>Body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"point"</span><span class="p">,</span><span class="w">
  </span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">],</span><span class="w"> </span><span class="c1">// finger tip in world space coordinates</span><span class="w">
  </span><span class="p">[</span><span class="mf">4.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">6.0</span><span class="p">],</span><span class="w"> </span><span class="c1">// intersection point in world space coordinates</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>If the ray cast from the user’s finger veers off the last pointed-at entity, one last message is sent to indicate that the user has stopped pointing at it. This is useful for removing highlight effect, etc.</p> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"point-exit"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="entity-pokes"> <a href="#entity-pokes" class="anchor-heading" aria-labelledby="entity-pokes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entity pokes </h3> <p>Once an entity is pointing at another entity, it can ask to “physically” interact with it, by turning the pointing into a poke. The poke doesn’t contain vector information – it’s up to the receiver to correlate with pointing events, as those will be streaming a continuously updating location, while poking is a request-response which the receiver can reject. Such a rejection should be visualized, so that the sender’s user can understand if and why poking failed.</p> <ul> <li>Receiver: The pointed-at entity</li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"poke"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="kc">true</span><span class="err">|</span><span class="kc">false</span><span class="p">}</span><span class="w"> </span><span class="c1">// whether poking started (true) or stopped (false)</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Success response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"poke"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Failure response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"poke"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{string explaining why, presentable to user}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="entity-grabs"> <a href="#entity-grabs" class="anchor-heading" aria-labelledby="entity-grabs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entity grabs </h3> <p>Another action an entity can do when pointing at another entity, is to “grab” it. The below interaction is sent from the visor to the grabbed entity, but the actual moving of the grabbed thing is performed with a field in the intent struct, and the movement is performed server-side. The purpose of this event is just to let the entity know that it will be moved by the server between the start and stop event, and the receiving app doesn’t have to/can’t do any movement on its own in response.</p> <ul> <li>Receiver: The pointed-at entity</li> <li>Type: <code class="language-plaintext highlighter-rouge">one-way</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"grabbing"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="kc">true</span><span class="err">|</span><span class="kc">false</span><span class="p">}</span><span class="w"> </span><span class="c1">// whether grabbing started (true) or stopped (false)</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="add-property-animation"> <a href="#add-property-animation" class="anchor-heading" aria-labelledby="add-property-animation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add property animation </h3> <p>Ask to add an animation to an entity. See the documentation for animation descriptor in <a href="/components#property_animations">property_animations</a></p> <ul> <li>Receiver: The animated entity</li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"add_property_animation"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="err">animation</span><span class="w"> </span><span class="err">descriptor</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Success response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"add_property_animation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"abc123"</span><span class="w"> </span><span class="c1">// ID of this animation</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Failure response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"add_property_animation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{string explaining why, presentable to user}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="remove-property-animation"> <a href="#remove-property-animation" class="anchor-heading" aria-labelledby="remove-property-animation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Remove property animation </h3> <p>Ask to remove an existing animation by ID.</p> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"remove_property_animation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"abc123"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Success response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"remove_property_animation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"abc123"</span><span class="w"> </span><span class="c1">// ID of this animation that was removed</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Failure response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"remove_property_animation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{string explaining why, presentable to user}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h2 id="protocol-level-messages"> <a href="#protocol-level-messages" class="anchor-heading" aria-labelledby="protocol-level-messages"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Protocol level messages </h2> <h3 id="entity-wishes-to-transmit-live-media"> <a href="#entity-wishes-to-transmit-live-media" class="anchor-heading" aria-labelledby="entity-wishes-to-transmit-live-media"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entity wishes to transmit live media </h3> <p>Before an entity can transmit streamed audio, video or geometry, a track must be created along which to send that data. This interaction will add a <a href="/components#live_media">live_media</a> component to the sender’s entity.</p> <p>See the <a href="/components#live_media">live_media</a> compponent documentation for valid media types, media formats and metadata payloads.</p> <ul> <li>Receiver: <code class="language-plaintext highlighter-rouge">place</code></li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"allocate_track"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"audio"</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">media</span><span class="w"> </span><span class="err">type</span><span class="w">
  </span><span class="s2">"opus"</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">media</span><span class="w"> </span><span class="err">format</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="err">metadata</span><span class="w"> </span><span class="c1">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Legacy request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"allocate_track"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"audio"</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">media</span><span class="w"> </span><span class="err">type</span><span class="w">
  </span><span class="mi">48000</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">sample</span><span class="w"> </span><span class="err">rate</span><span class="w">
  </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">channel</span><span class="w"> </span><span class="err">count</span><span class="w">
  </span><span class="s2">"opus"</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">media</span><span class="w"> </span><span class="err">format</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Success response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"allocate_track"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="mi">3</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">track_id</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Failure response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"allocate_track"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{string explaining why, presentable to user}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="tbd-subscribeunsubscribe"> <a href="#tbd-subscribeunsubscribe" class="anchor-heading" aria-labelledby="tbd-subscribeunsubscribe"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> TBD: Subscribe/unsubscribe </h3> <ul> <li>Receiver: <code class="language-plaintext highlighter-rouge">place</code></li> <li>Type: <code class="language-plaintext highlighter-rouge">request</code></li> <li>Request body for subscribe:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"""{guard pattern}"""</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{subscription ID}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Unsubscribe request body:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"unsubscribe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{subscription ID}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Response:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"unsubscribe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"{'ok'|'not_subscribed'}"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <ul> <li>Example:</li> </ul> <div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">[</span><span class="w">
    </span><span class="s2">"interaction"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"place"</span><span class="p">,</span><span class="w"> </span><span class="c1">// place is the subscription gateway</span><span class="w">
    </span><span class="s2">"567"</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"""[
        "</span><span class="err">new_tweet</span><span class="s2">",
        TweetSender,
        TweetBody
      ] where TweetSender == "</span><span class="err">nevyn</span><span class="s2">" """</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>In this scenario the place contains an app that publishes new tweets as interactions to the room. This interaction will ask the place to subscribe to all interaction publications which start with the word “new_tweet” followed by two fields. The guard clause asks that the sender must be “nevyn”. If the guard matches, the publication interaction will be forwarded by the place from the sending agent to the subscribing agent.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
